---
layout: post
title: VRO基础入门（一） -  简介
tags: VAO, VRO
---



Veeam Data Platform v12发布后，产品版本做了重新的组合，其中在最高的白金版中包含了Veeam Recovery Orchestrator （VRO）组件，这个组件是从以前的Veeam Availability Orchestrator升级而来，目前的版本是v6版本，配合VBR v12和Veeam ONE v12一起使用。v6的版本相比之前v2的版本有了全面的更新，功能也更加强大，因此我对我的这个基础入门系列文章进行了一轮更新。

## 什么是VRO？

作为Veeam数据管理平台的最高配组件，它全面加强了Veeam Backup &Replication在恢复时的能力。在v6中能够支持非常丰富的备份和灾备数据，主要包括：

- VBR备份的vSphere虚拟机
- Veeam Agent备份的各种Windows和Linux虚拟机
- VBR复制的vSphere Replica存档
- Veeam CDP复制的vSphere VM存档
- 通过NetApp和HPE 存储设备复制的存储卷（仅限存储用于vSphere环境）

在v6中，这些数据支持非常丰富的恢复场景和功能，主要包括

 - 能够通过软件的设置，来保证企业实施的灾备基础架构的满足所要求的RPO和RTO；
 - 能够尽可能自动化的完成灾备的切换过程，该操作同时支持备份存档、复制存档和CDP存档；
 - 能够通过数据实验室，来确保灾备的精准可靠，所有灾备演练将在数据实验室中1:1的完整演练。

而对于恢复目的地的选择，VRO也将范围从单一的vSphere扩充到了Azure云，支持了Direct to Azure的恢复。

VRO替代了VBR中Recovery、Failover以及Surebackup的操作，可以说是对于这3个关键操作的进一步加强，在这些关键操作中，可以加入各种自定义的步骤和脚本，使之能够更加接近实际业务场景中的使用。对于管理员来说，合理的设计这3个操作中的额外步骤能极大程度的降低IT运维中灾备流程的复杂度。

## VRO支持哪些场景使用？

VRO支持的数据中心从简单到复杂，都可以使用，以下仅简单从最基本的架构举两个例子：

### 单个数据中心

![390jqx.png](https://s2.ax1x.com/2020/02/16/390jqx.png)



单个数据中心内，加入VRO的组件后，和原有备份的架构几乎没有太大差别，所有VBR上的操作不会有任何改变，常规的所有备份恢复操作都在VBR上可以完成，而VRO则在这里开始担当关键业务的RPO和RTO的确保任务。通常来说关键业务出现宕机后，都会在原始位置实现恢复，因此也没有特别的专用资源用于恢复准备。

因此，在这种场景下，唯一需要改变的是选择一些关键的VM，由VRO来接管这些VM的RPO和RTO。

### 一主一备数据中心

![390OMR.png](https://s2.ax1x.com/2020/02/16/390OMR.png)

稍微复杂点，也是很典型的场景，就是跨区域的主备数据中心，主中心承担生成业务，而备中心承担灾备业务。我们通常备份的设计会将备份存档拷贝到灾备中心进行存放，也可能会将一些关键的VM直接1:1的复制到灾备中心。而这时候，在灾备中心的数据恢复流程都将可以被编制到VRO的Replica Plan或Restore Plan中，同时这些Plan也将会被在相应的Datalabs中做完整的恢复演练。

这种场景下，原先备份的架构也没有太大变化，和单数据中心非常相似，只是我们可以规划一部分资源专用于灾备恢复。

## VRO支持的五种Plan

VRO本身并不提供备份和复制功能，所有对于源数据的处理功能，都会在VBR中完成。VRO中目前提供了五种Plan：

- Replica Plan - 通过VBR 复制功能创建的的副本恢复计划
- CDP Replica Plan - 通过VBR CDP复制功能创建的副本恢复计划
- Restore Plan - 通过VBR vSphere备份和通过Veeam Agent 备份创建的备份存档，恢复至vSphere恢复计划
- Storage Plan - 通过NetApp和HPE存储卷复制创建的VMware Datastore恢复计划
- Cloud Plan - 通过VBR vSphere备份和通过Veeam Agent 备份创建的备份存档，恢复至Azure恢复计划

这些Plan支持的操作：

  - 资源可用性测试
  - 完整报告自动生成
  - 一键式全自动恢复、故障切换

另外，作为Veeam产品看家本领，DataLabs功能在VRO中也是极大增强，在VRO中不仅能将DataLabs用于Replica Plan和Restore Plan的测试，还能利用VRO中强大的脚本和步骤添加功能，自动化的生成各种复杂的用于测试的环境。通过这种增强，复杂的测试用例，复杂的环境部署工作将会被简化成一键式的按钮，极大提升DataLabs的使用效率。

## VRO可以用来做什么？

简单来说，我总结了下，有以下主要能力：

- 全自动恢复到Azure云和VMware虚拟化
- “零污染”还原 - 通过智能检测引擎在还原前扫描病毒，确保还原的数据没有被污染
- 全自动灾备和恢复测试
- 即时可用的数据实验室创建
- 全面的应用可用性验证
- 一键式灾备恢复
- 全自动动态灾备文档

以上就是VRO的简单介绍，欢迎关注VRO基础入门系列，在最近一段时间我会陆续更新以下内容：

- [VRO基础入门（一）-  简介](https://blog.backupnext.cloud/_posts/2023-05-24-VRO-v6-Guide-01/)
- [VRO基础入门（二）-  安装与部署](https://blog.backupnext.cloud/_posts/2023-05-25-VRO-v6-Guide-02/)
- [VRO基础入门（三）-  基本组件 · 上篇](https://blog.backupnext.cloud/_posts/2023-05-26-VRO-v6-Guide-03/)
- [VRO基础入门（四）-  基本组件 · 下篇]
- [VRO基础入门（五）-  成功灾备计划的第一步]
- [VRO基础入门（六）-  数据实验室]
- [VRO基础入门（七）-  Plan Step  · 上篇]
- [VRO基础入门（八）-  Plan Step  · 下篇]
- [VRO基础入门（九）-  文档模板解析]
- [VRO基础入门（十）- 使用VRO搭配K10实现全自动容器灾备]