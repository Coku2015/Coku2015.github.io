<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>VAO基础入门（三） - 基本组件 · 上篇 | Backup next cloud</title><meta name=keywords content="VAO"><meta name=description content="系列目录：  VAO基础入门（一）- 简介 VAO基础入门（二）- 安装与部署 VAO基础入门（三）- 基本组件 · 上篇 VAO基础入门（四）- 基本组件 · 下篇 VAO基础入门（五）- 基础配置要点 VAO基础入门（六）- 成功灾备计划的第一步 VAO基础入门（七）- Plan Step · 上篇 VAO基础入门（八）- Plan Step · 下篇 VAO基础入门（九）- 文档模板解析  VAO引入了一套非常特殊的概念，它为该产品中使用的组件定义了一系列名称，随着版本的更新和迭代，这里的组件和名称可能会发生一些变化。目前VAO的版本是v2.0，因此本文所述内容仅适用于v2.0之后的版本，而后续版本中如果有新的变化，我会在后续的更新中说明。
Scope 定义和用途 Scope是VAO的最核心的概念，在v2.0中首次引入了这个概念。每个Scope中包含了灾备中需要一系列元素，VAO把这些元素称为Plan Components：
 - VM Groups - Recovery Locations - Plan Steps - Credentials - Template Jobs 打个比方，Scope是一间房间，那么在这个房间中所放置的各种家具就是以上这些Plan Components。对于灾备来说，以上这些Plan Components将会在Orchestration Plan中被具体使用到。可以说Orchestration Plan是将这些Plan Components有序的组合起来，最终可以让我们实现一键的灾备恢复。
另外，Scope中还有个非常特殊的Component &ndash; Datalab，每一个Datalab对应某个Scope中，也就是说，每个Scope都有一个或多个独立的属于自己的DataLab。
关于Plan Components和DataLab，将在VAO基础入门（四）- 基本组件 · 下篇中详细介绍。
分类和创建方式 VAO中的Scope可以大致分为两类，一类是系统内置的名称叫Default的Scope，这个Scope无法删除，无法修改名称，并且Administrator的Role会被包含在这个Scope中，在VAO的其他Scope中是无法选择添加Administrators Role。当您要授予任何用户执行Administration配置操作时，您就需要将该用户添加至Default Scope下的Administrators Role。还记不记得在前一篇推送中提到的初始化步骤，在初始化过程中所添加的用户，默认就会被添加到这个Administrators Role下面。当然我们可以来添加更多的用户到Administrator Role中。"><meta name=author content="Lei Wei"><link rel=canonical href=https://newblog.backupnext.cloud/post/2020-02-19-vao-guide-03/><link crossorigin=anonymous href=/assets/css/stylesheet.min.2d6dbfc6e0f8a1db1c9d082a76dc11d094328cf63f247bbc2421dfaa7f2bb170.css integrity="sha256-LW2/xuD4odscnQgqdtwR0JQyjPY/JHu8JCHfqn8rsXA=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://newblog.backupnext.cloud/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://newblog.backupnext.cloud/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://newblog.backupnext.cloud/favicon-32x32.png><link rel=apple-touch-icon href=https://newblog.backupnext.cloud/apple-touch-icon.png><link rel=mask-icon href=https://newblog.backupnext.cloud/favicon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.83.1"><meta property="og:title" content="VAO基础入门（三） -  基本组件 · 上篇"><meta property="og:description" content="系列目录：  VAO基础入门（一）- 简介 VAO基础入门（二）- 安装与部署 VAO基础入门（三）- 基本组件 · 上篇 VAO基础入门（四）- 基本组件 · 下篇 VAO基础入门（五）- 基础配置要点 VAO基础入门（六）- 成功灾备计划的第一步 VAO基础入门（七）- Plan Step · 上篇 VAO基础入门（八）- Plan Step · 下篇 VAO基础入门（九）- 文档模板解析  VAO引入了一套非常特殊的概念，它为该产品中使用的组件定义了一系列名称，随着版本的更新和迭代，这里的组件和名称可能会发生一些变化。目前VAO的版本是v2.0，因此本文所述内容仅适用于v2.0之后的版本，而后续版本中如果有新的变化，我会在后续的更新中说明。
Scope 定义和用途 Scope是VAO的最核心的概念，在v2.0中首次引入了这个概念。每个Scope中包含了灾备中需要一系列元素，VAO把这些元素称为Plan Components：
 - VM Groups - Recovery Locations - Plan Steps - Credentials - Template Jobs 打个比方，Scope是一间房间，那么在这个房间中所放置的各种家具就是以上这些Plan Components。对于灾备来说，以上这些Plan Components将会在Orchestration Plan中被具体使用到。可以说Orchestration Plan是将这些Plan Components有序的组合起来，最终可以让我们实现一键的灾备恢复。
另外，Scope中还有个非常特殊的Component &ndash; Datalab，每一个Datalab对应某个Scope中，也就是说，每个Scope都有一个或多个独立的属于自己的DataLab。
关于Plan Components和DataLab，将在VAO基础入门（四）- 基本组件 · 下篇中详细介绍。
分类和创建方式 VAO中的Scope可以大致分为两类，一类是系统内置的名称叫Default的Scope，这个Scope无法删除，无法修改名称，并且Administrator的Role会被包含在这个Scope中，在VAO的其他Scope中是无法选择添加Administrators Role。当您要授予任何用户执行Administration配置操作时，您就需要将该用户添加至Default Scope下的Administrators Role。还记不记得在前一篇推送中提到的初始化步骤，在初始化过程中所添加的用户，默认就会被添加到这个Administrators Role下面。当然我们可以来添加更多的用户到Administrator Role中。"><meta property="og:type" content="article"><meta property="og:url" content="https://newblog.backupnext.cloud/post/2020-02-19-vao-guide-03/"><meta property="article:section" content="post"><meta property="og:site_name" content="Backup next Cloud"><meta name=twitter:card content="summary"><meta name=twitter:title content="VAO基础入门（三） -  基本组件 · 上篇"><meta name=twitter:description content="系列目录：  VAO基础入门（一）- 简介 VAO基础入门（二）- 安装与部署 VAO基础入门（三）- 基本组件 · 上篇 VAO基础入门（四）- 基本组件 · 下篇 VAO基础入门（五）- 基础配置要点 VAO基础入门（六）- 成功灾备计划的第一步 VAO基础入门（七）- Plan Step · 上篇 VAO基础入门（八）- Plan Step · 下篇 VAO基础入门（九）- 文档模板解析  VAO引入了一套非常特殊的概念，它为该产品中使用的组件定义了一系列名称，随着版本的更新和迭代，这里的组件和名称可能会发生一些变化。目前VAO的版本是v2.0，因此本文所述内容仅适用于v2.0之后的版本，而后续版本中如果有新的变化，我会在后续的更新中说明。
Scope 定义和用途 Scope是VAO的最核心的概念，在v2.0中首次引入了这个概念。每个Scope中包含了灾备中需要一系列元素，VAO把这些元素称为Plan Components：
 - VM Groups - Recovery Locations - Plan Steps - Credentials - Template Jobs 打个比方，Scope是一间房间，那么在这个房间中所放置的各种家具就是以上这些Plan Components。对于灾备来说，以上这些Plan Components将会在Orchestration Plan中被具体使用到。可以说Orchestration Plan是将这些Plan Components有序的组合起来，最终可以让我们实现一键的灾备恢复。
另外，Scope中还有个非常特殊的Component &ndash; Datalab，每一个Datalab对应某个Scope中，也就是说，每个Scope都有一个或多个独立的属于自己的DataLab。
关于Plan Components和DataLab，将在VAO基础入门（四）- 基本组件 · 下篇中详细介绍。
分类和创建方式 VAO中的Scope可以大致分为两类，一类是系统内置的名称叫Default的Scope，这个Scope无法删除，无法修改名称，并且Administrator的Role会被包含在这个Scope中，在VAO的其他Scope中是无法选择添加Administrators Role。当您要授予任何用户执行Administration配置操作时，您就需要将该用户添加至Default Scope下的Administrators Role。还记不记得在前一篇推送中提到的初始化步骤，在初始化过程中所添加的用户，默认就会被添加到这个Administrators Role下面。当然我们可以来添加更多的用户到Administrator Role中。"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://newblog.backupnext.cloud/post/"},{"@type":"ListItem","position":2,"name":"VAO基础入门（三） -  基本组件 · 上篇","item":"https://newblog.backupnext.cloud/post/2020-02-19-vao-guide-03/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"VAO基础入门（三） -  基本组件 · 上篇","name":"VAO基础入门（三） -  基本组件 · 上篇","description":"系列目录：  VAO基础入门（一）- 简介 VAO基础入门（二）- 安装与部署 VAO基础入门（三）- 基本组件 · 上篇 VAO基础入门（四）- 基本组件 · 下篇 VAO基础入门（五）- 基础配置要点 VAO基础入门（六）- 成功灾备计划的第一步 VAO基础入门（七）- Plan Step · 上篇 VAO基础入门（八）- Plan Step · 下篇 VAO基础入门（九）- 文档模板解析  VAO引入了一套非常特殊的概念，它为该产品中使用的组件定义了一系列名称，随着版本的更新和迭代，这里的组件和名称可能会发生一些变化。目前VAO的版本是v2.0，因此本文所述内容仅适用于v2.0之后的版本，而后续版本中如果有新的变化，我会在后续的更新中说明。\nScope 定义和用途 Scope是VAO的最核心的概念，在v2.0中首次引入了这个概念。每个Scope中包含了灾备中需要一系列元素，VAO把这些元素称为Plan Components：\n - VM Groups - Recovery Locations - Plan Steps - Credentials - Template Jobs 打个比方，Scope是一间房间，那么在这个房间中所放置的各种家具就是以上这些Plan Components。对于灾备来说，以上这些Plan Components将会在Orchestration Plan中被具体使用到。可以说Orchestration Plan是将这些Plan Components有序的组合起来，最终可以让我们实现一键的灾备恢复。\n另外，Scope中还有个非常特殊的Component \u0026ndash; Datalab，每一个Datalab对应某个Scope中，也就是说，每个Scope都有一个或多个独立的属于自己的DataLab。\n关于Plan Components和DataLab，将在VAO基础入门（四）- 基本组件 · 下篇中详细介绍。\n分类和创建方式 VAO中的Scope可以大致分为两类，一类是系统内置的名称叫Default的Scope，这个Scope无法删除，无法修改名称，并且Administrator的Role会被包含在这个Scope中，在VAO的其他Scope中是无法选择添加Administrators Role。当您要授予任何用户执行Administration配置操作时，您就需要将该用户添加至Default Scope下的Administrators Role。还记不记得在前一篇推送中提到的初始化步骤，在初始化过程中所添加的用户，默认就会被添加到这个Administrators Role下面。当然我们可以来添加更多的用户到Administrator Role中。","keywords":["VAO"],"articleBody":"系列目录：  VAO基础入门（一）- 简介 VAO基础入门（二）- 安装与部署 VAO基础入门（三）- 基本组件 · 上篇 VAO基础入门（四）- 基本组件 · 下篇 VAO基础入门（五）- 基础配置要点 VAO基础入门（六）- 成功灾备计划的第一步 VAO基础入门（七）- Plan Step · 上篇 VAO基础入门（八）- Plan Step · 下篇 VAO基础入门（九）- 文档模板解析  VAO引入了一套非常特殊的概念，它为该产品中使用的组件定义了一系列名称，随着版本的更新和迭代，这里的组件和名称可能会发生一些变化。目前VAO的版本是v2.0，因此本文所述内容仅适用于v2.0之后的版本，而后续版本中如果有新的变化，我会在后续的更新中说明。\nScope 定义和用途 Scope是VAO的最核心的概念，在v2.0中首次引入了这个概念。每个Scope中包含了灾备中需要一系列元素，VAO把这些元素称为Plan Components：\n - VM Groups - Recovery Locations - Plan Steps - Credentials - Template Jobs 打个比方，Scope是一间房间，那么在这个房间中所放置的各种家具就是以上这些Plan Components。对于灾备来说，以上这些Plan Components将会在Orchestration Plan中被具体使用到。可以说Orchestration Plan是将这些Plan Components有序的组合起来，最终可以让我们实现一键的灾备恢复。\n另外，Scope中还有个非常特殊的Component – Datalab，每一个Datalab对应某个Scope中，也就是说，每个Scope都有一个或多个独立的属于自己的DataLab。\n关于Plan Components和DataLab，将在VAO基础入门（四）- 基本组件 · 下篇中详细介绍。\n分类和创建方式 VAO中的Scope可以大致分为两类，一类是系统内置的名称叫Default的Scope，这个Scope无法删除，无法修改名称，并且Administrator的Role会被包含在这个Scope中，在VAO的其他Scope中是无法选择添加Administrators Role。当您要授予任何用户执行Administration配置操作时，您就需要将该用户添加至Default Scope下的Administrators Role。还记不记得在前一篇推送中提到的初始化步骤，在初始化过程中所添加的用户，默认就会被添加到这个Administrators Role下面。当然我们可以来添加更多的用户到Administrator Role中。\n第二类是除了Default之外增加的Scope，对于每一个Scope，可以修改名称，可以删除。而这些Scope的Roles仅限于Plan Authors。在每个Scope下的Plan Authors Role中，我们可以为这个Scope加入不同的用户。如下图所示。\n在VAO中，这个Scope非常难理解，不过没关系，我还是来继续打这个比方：\n我们可以把Scope想象成一个一个的房间，每个房间都会有把锁，而这把锁配了多把钥匙，我们现在把这些钥匙分给不同的用户，那么这些用户都能通过A钥匙进入房间（Scope A），通过B钥匙进入房间（Scope B），通过C钥匙进入房间（Scope C）。这样，就形成了VAO中特殊的一种权限的管理：\n当前有房间（Scope）：A、B、C、D 用户1：拥有房间A、B的钥匙。 用户2：拥有房间B、C、D的钥匙。 用户3：拥有房间D的钥匙。 转换成VAO中的Scope管理：\n房间（Scope A）：用户1 房间（Scope B）：用户1、用户2 房间（Scope C）：用户2 房间（Scope D）：用户2、用户3 而分钥匙的方法，就是在VAO中设置User and Scopes，在VAO中，通过拥有Administrator Role的User登录后，可以至Administration界面下面，找到Permission-Users and Scope来设定以上的管理权限，如下图：\n按照这样设定完成后，我们用User 1再次登入VAO的系统后，我们可以看到Dashborad上显示的当前用户的Scope如下图所示：\n类似的，User 2登入系统后，将会看到房间B、C、D，而User 3登入系统后，将只会看到房间D。\n配置Scope中的Plan Components 进入Administration界面，在Permissions下，可以找到Plan Components，在这个界面上，可以为每个Scope设定每种Components。如下图，可以在红框位置选择Scope来切换并且设定。\n这里面大家可以注意到这是一个复选框，也就是说，可以同时选择多个Scope进行相关设定，但是为了更准确的设置相关内容，我还是建议大家逐个勾选设定会比较好。\nDatalabs VAO的Datalab其实就是VBR中的Virtual Lab，只要在VBR中配置了Virtual Lab后，VAO就能直接识别到。在识别到这些Virtual Labs之后，VAO需要做一个分配的动作，将这些Virtual Lab按照实际使用的需求分配给不同的Scope。特别注意，每一个Virtual Lab只能分配给一个指定的Scope。\n要分配Datalab，可以使用Administrator账号进入Administration界面，找到Permission下面的Datalab Assignment，在这个页面下，勾选中间VAO扫描到的Virtual Lab名称，然后点击Assign按钮。\n当点击了Assign按钮后会弹出Assign Datalab to Scope的对话框，在这里选择需要分配给哪个Scope即可。如下图所示。\n如果需要调整或者重新分配Datalab，可以勾选Virtual Lab名称，然后点击Unassign按钮，稍等片刻之后就可以重新分配给其他的Scope了。\nLab Groups 我相信熟悉DataLabs的同学一定会好奇，我们VBR上的Datalabs的功能包含三个核心组件：Virtual Lab、Application Group和Surebackup Job。那么在VAO中我们将DataLab和VBR的Virtual Lab做了一一的对应，剩下的Application Group和Surebackup Job去哪里了？\n在VAO中，也有一个和VBR中的Application Group一一对应的组件，那就是Lab Groups。在Administration控制台中并没有这个Lab Groups的设定，这个Lab Groups需要使用每个用户的账号登入自己的VAO控制台中，用各自的账号进入DataLabs主页面进行设置。和Virtual Lab不同的是，Lab Groups并不是从VBR的Application Group中继承，在VAO中，这个Lab Group是全新创建的，需要用VAO中的对象来创建。\n一般来说，Lab Group可以保持空的状态，这和我们之前在Application Group的说明中提到的完全一致，除非是业务有依赖关系，必须依赖某个系统才能运行，那么此时，我们需要将这个被其他系统依赖的系统放入Lab Group之中。\n而Surebackup Job，在VAO中就不需要用到了，这个Job会自动集成入Orchestration Plan之中，这里就不展开讨论，在后面的章节会详细介绍。\n以上就是本章节的主要内容，谢谢关注。\n","wordCount":"149","inLanguage":"en","datePublished":"0001-01-01T00:00:00Z","dateModified":"0001-01-01T00:00:00Z","author":{"@type":"Person","name":"Lei Wei"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://newblog.backupnext.cloud/post/2020-02-19-vao-guide-03/"},"publisher":{"@type":"Organization","name":"Backup next cloud","logo":{"@type":"ImageObject","url":"https://newblog.backupnext.cloud/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://newblog.backupnext.cloud/ accesskey=h title="Lei Wei's blog (Alt + H)">Lei Wei's blog</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://newblog.backupnext.cloud/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://newblog.backupnext.cloud/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://newblog.backupnext.cloud/search/ title=Search><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>VAO基础入门（三） - 基本组件 · 上篇</h1><div class=post-meta>Lei Wei&nbsp;|&nbsp;<a href=https://github.com/Coku2015/Coku2015.github.io/blob/master/content/post/2020-02-19-VAO%20Guide%2003.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><div class=details>Table of Contents</div></summary><div class=inner><ul><li><a href=#%e7%b3%bb%e5%88%97%e7%9b%ae%e5%bd%95 aria-label=系列目录：>系列目录：</a></li><li><a href=#scope aria-label=Scope>Scope</a><ul><ul><li><a href=#%e5%ae%9a%e4%b9%89%e5%92%8c%e7%94%a8%e9%80%94 aria-label=定义和用途>定义和用途</a></li><li><a href=#%e5%88%86%e7%b1%bb%e5%92%8c%e5%88%9b%e5%bb%ba%e6%96%b9%e5%bc%8f aria-label=分类和创建方式>分类和创建方式</a></li><li><a href=#%e9%85%8d%e7%bd%aescope%e4%b8%ad%e7%9a%84plan-components aria-label="配置Scope中的Plan Components">配置Scope中的Plan Components</a></li></ul></ul></li><li><a href=#datalabs aria-label=Datalabs>Datalabs</a><ul><ul><li><a href=#lab-groups aria-label="Lab Groups">Lab Groups</a></li></ul></ul></li></ul></div></details></div><div class=post-content><h2 id=系列目录>系列目录：<a hidden class=anchor aria-hidden=true href=#系列目录>#</a></h2><ul><li><a href=https://blog.backupnext.cloud/_posts/2020-02-17-VAO-Guide-01/>VAO基础入门（一）- 简介</a></li><li><a href=https://blog.backupnext.cloud/_posts/2020-02-18-VAO-Guide-02/>VAO基础入门（二）- 安装与部署</a></li><li><a href=https://blog.backupnext.cloud/_posts/2020-02-19-VAO-Guide-03/>VAO基础入门（三）- 基本组件 · 上篇</a></li><li><a href=https://blog.backupnext.cloud/_posts/2020-02-20-VAO-Guide-04/>VAO基础入门（四）- 基本组件 · 下篇</a></li><li><a href=https://blog.backupnext.cloud/_posts/2020-02-21-VAO-Guide-05/>VAO基础入门（五）- 基础配置要点</a></li><li><a href=https://blog.backupnext.cloud/_posts/2020-02-25-VAO-Guide-06/>VAO基础入门（六）- 成功灾备计划的第一步</a></li><li><a href=https://blog.backupnext.cloud/_posts/2020-02-27-VAO-Guide-07/>VAO基础入门（七）- Plan Step · 上篇</a></li><li><a href=https://blog.backupnext.cloud/_posts/2020-02-28-VAO-Guide-08/>VAO基础入门（八）- Plan Step · 下篇</a></li><li><a href=https://blog.backupnext.cloud/_posts/2020-03-02-VAO-Guide-09/>VAO基础入门（九）- 文档模板解析</a></li></ul><p>VAO引入了一套非常特殊的概念，它为该产品中使用的组件定义了一系列名称，随着版本的更新和迭代，这里的组件和名称可能会发生一些变化。目前VAO的版本是v2.0，因此本文所述内容仅适用于v2.0之后的版本，而后续版本中如果有新的变化，我会在后续的更新中说明。</p><h2 id=scope>Scope<a hidden class=anchor aria-hidden=true href=#scope>#</a></h2><h4 id=定义和用途>定义和用途<a hidden class=anchor aria-hidden=true href=#定义和用途>#</a></h4><p>Scope是VAO的最核心的概念，在v2.0中首次引入了这个概念。每个Scope中包含了灾备中需要一系列元素，VAO把这些元素称为Plan Components：</p><pre><code> - VM Groups
 - Recovery Locations
 - Plan Steps
 - Credentials
 - Template Jobs
</code></pre><p>打个比方，Scope是一间房间，那么在这个房间中所放置的各种家具就是以上这些Plan Components。对于灾备来说，以上这些Plan Components将会在Orchestration Plan中被具体使用到。可以说Orchestration Plan是将这些Plan Components有序的组合起来，最终可以让我们实现一键的灾备恢复。</p><p>另外，Scope中还有个非常特殊的Component &ndash; Datalab，每一个Datalab对应某个Scope中，也就是说，每个Scope都有<strong>一个或多个</strong>独立的属于自己的DataLab。</p><p>关于Plan Components和DataLab，将在<a href=https://blog.backupnext.cloud/_posts/2020-02-20-VAO-Guide-04/>VAO基础入门（四）- 基本组件 · 下篇</a>中详细介绍。</p><h4 id=分类和创建方式>分类和创建方式<a hidden class=anchor aria-hidden=true href=#分类和创建方式>#</a></h4><p>VAO中的Scope可以大致分为两类，一类是系统内置的名称叫<code>Default</code>的Scope，这个Scope无法删除，无法修改名称，并且Administrator的Role会被包含在这个Scope中，在VAO的其他Scope中是无法选择添加Administrators Role。当您要授予任何用户执行<code>Administration</code>配置操作时，您就需要将该用户添加至<code>Default</code> Scope下的Administrators Role。还记不记得在前一篇推送中提到的初始化步骤，在初始化过程中所添加的用户，默认就会被添加到这个Administrators Role下面。当然我们可以来添加更多的用户到Administrator Role中。</p><p>第二类是除了Default之外增加的Scope，对于每一个Scope，可以修改名称，可以删除。而这些Scope的Roles仅限于Plan Authors。在每个Scope下的Plan Authors Role中，我们可以为这个Scope加入不同的用户。如下图所示。</p><p><img loading=lazy src=https://s2.ax1x.com/2020/02/18/3F05i6.png alt=3F05i6.png></p><p>在VAO中，这个Scope非常难理解，不过没关系，我还是来继续打这个比方：</p><p>我们可以把Scope想象成一个一个的房间，每个房间都会有把锁，而这把锁配了多把钥匙，我们现在把这些钥匙分给不同的用户，那么这些用户都能通过A钥匙进入<code>房间（Scope A）</code>，通过B钥匙进入<code>房间（Scope B）</code>，通过C钥匙进入<code>房间（Scope C）</code>。这样，就形成了VAO中特殊的一种权限的管理：</p><pre><code>当前有房间（Scope）：A、B、C、D

用户1：拥有房间A、B的钥匙。

用户2：拥有房间B、C、D的钥匙。

用户3：拥有房间D的钥匙。
</code></pre><p>转换成VAO中的Scope管理：</p><pre><code>房间（Scope A）：用户1

房间（Scope B）：用户1、用户2

房间（Scope C）：用户2

房间（Scope D）：用户2、用户3
</code></pre><p>而分钥匙的方法，就是在VAO中设置<code>User and Scopes</code>，在VAO中，通过拥有Administrator Role的User登录后，可以至<code>Administration</code>界面下面，找到<code>Permission->Users and Scope</code>来设定以上的管理权限，如下图：</p><p><img loading=lazy src=https://s2.ax1x.com/2020/02/18/3k3G4J.png alt=3k3G4J.png></p><p>按照这样设定完成后，我们用User 1再次登入VAO的系统后，我们可以看到Dashborad上显示的当前用户的Scope如下图所示：</p><p><img loading=lazy src=https://s2.ax1x.com/2020/02/18/3k38N4.png alt=3k38N4.png></p><p>类似的，User 2登入系统后，将会看到房间B、C、D，而User 3登入系统后，将只会看到房间D。</p><h4 id=配置scope中的plan-components>配置Scope中的Plan Components<a hidden class=anchor aria-hidden=true href=#配置scope中的plan-components>#</a></h4><p>进入<code>Administration</code>界面，在<code>Permissions</code>下，可以找到<code>Plan Components</code>，在这个界面上，可以为每个<code>Scope</code>设定每种Components。如下图，可以在红框位置选择Scope来切换并且设定。</p><p><img loading=lazy src=https://s2.ax1x.com/2020/02/18/3k3YC9.png alt=3k3YC9.png></p><p>这里面大家可以注意到这是一个复选框，也就是说，可以同时选择多个Scope进行相关设定，但是为了更准确的设置相关内容，我还是建议大家逐个勾选设定会比较好。</p><h2 id=datalabs>Datalabs<a hidden class=anchor aria-hidden=true href=#datalabs>#</a></h2><p>VAO的Datalab其实就是VBR中的Virtual Lab，只要在VBR中配置了Virtual Lab后，VAO就能直接识别到。在识别到这些Virtual Labs之后，VAO需要做一个分配的动作，将这些Virtual Lab按照实际使用的需求分配给不同的Scope。特别注意，每一个Virtual Lab只能分配给一个指定的Scope。</p><p>要分配Datalab，可以使用Administrator账号进入<code>Administration</code>界面，找到<code>Permission</code>下面的<code>Datalab Assignment</code>，在这个页面下，勾选中间VAO扫描到的Virtual Lab名称，然后点击Assign按钮。</p><p>当点击了Assign按钮后会弹出Assign Datalab to Scope的对话框，在这里选择需要分配给哪个Scope即可。如下图所示。</p><p><img loading=lazy src=https://s2.ax1x.com/2020/02/18/3kt6XR.png alt=3kt6XR.png></p><p>如果需要调整或者重新分配Datalab，可以勾选Virtual Lab名称，然后点击Unassign按钮，稍等片刻之后就可以重新分配给其他的Scope了。</p><h4 id=lab-groups>Lab Groups<a hidden class=anchor aria-hidden=true href=#lab-groups>#</a></h4><p>我相信熟悉DataLabs的同学一定会好奇，我们VBR上的Datalabs的功能包含三个核心组件：Virtual Lab、Application Group和Surebackup Job。那么在VAO中我们将DataLab和VBR的Virtual Lab做了一一的对应，剩下的Application Group和Surebackup Job去哪里了？</p><p>在VAO中，也有一个和VBR中的Application Group一一对应的组件，那就是Lab Groups。在Administration控制台中并没有这个Lab Groups的设定，这个Lab Groups需要使用每个用户的账号登入自己的VAO控制台中，用各自的账号进入DataLabs主页面进行设置。和Virtual Lab不同的是，Lab Groups并不是从VBR的Application Group中继承，在VAO中，这个Lab Group是全新创建的，需要用VAO中的对象来创建。</p><p><img loading=lazy src=https://s2.ax1x.com/2020/02/18/3kwKJK.png alt=3kwKJK.png></p><p>一般来说，Lab Group可以保持空的状态，这和我们之前在Application Group的说明中提到的完全一致，除非是业务有依赖关系，必须依赖某个系统才能运行，那么此时，我们需要将这个被其他系统依赖的系统放入Lab Group之中。</p><p><img loading=lazy src=https://s2.ax1x.com/2020/02/18/3kwMRO.png alt=3kwMRO.png></p><p>而Surebackup Job，在VAO中就不需要用到了，这个Job会自动集成入Orchestration Plan之中，这里就不展开讨论，在后面的章节会详细介绍。</p><p>以上就是本章节的主要内容，谢谢关注。</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://newblog.backupnext.cloud/tags/vao/>VAO</a></li></ul><nav class=paginav><a class=prev href=https://newblog.backupnext.cloud/post/2020-02-27-vao-guide-07/><span class=title>« Prev Page</span><br><span>VAO基础入门（七） - Plan Step · 上篇</span></a>
<a class=next href=https://newblog.backupnext.cloud/post/2020-03-02-vao-guide-09/><span class=title>Next Page »</span><br><span>VAO基础入门（九） - 文档模板解析</span></a></nav></footer></article></main><footer class=footer><span>Copyright Lei Wei</span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script>let menu=document.getElementById('menu');menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script></body></html>