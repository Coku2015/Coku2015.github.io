<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>VBR on Backup next cloud</title>
    <link>https://newblog.backupnext.cloud/tags/vbr/</link>
    <description>Recent content in VBR on Backup next cloud</description>
    <generator>Hugo -- gohugo.io</generator>
    <copyright>Copyright Lei Wei</copyright><atom:link href="https://newblog.backupnext.cloud/tags/vbr/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Backup Copy新模式，让3-2-1的黄金法则覆盖更广</title>
      <link>https://newblog.backupnext.cloud/post/2020-06-02-new-backup-copy/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://newblog.backupnext.cloud/post/2020-06-02-new-backup-copy/</guid>
      <description>Backup Copy理论基础 Veeam的Backup Copy是实现数据保护3-2-1黄金法则的基础，也是VBR的基础功能之一。它的功能非常简单，实现的效果就是将一个还原点（Restore Point）完完整整的拷贝一份，变成一个新的可以使用的还原点。什么是还原点？在VBR中它是某个VM或者Server某个时间点的记录，利用还原点，可以从VBR的存储库中将数据还原回该时间点的那份内容。对于还原点来说，它可能包含了一个文件，比如vbk全备份存档，也有可能包含了一组文件，一个vbk和一系列的vib，这取决于备份作业或者备份拷贝作业如何创建他们。
Backup Copy制作的备份链和普通的Backup作业制作的备份链略有不同，Backup Copy通常制作的备份链是永久增量的模型，也就是说，第一次的传输，Backup Copy会创建一个.vbk的全备份存档，在第二次开始的后续传输中，Backup Copy会基于第一次的.vbk形成一份.vib的增量存档，并且一直创建下去。
Backup Copy默认使用合成全备份的技术生成并创建全备份存档，只是这个全备份存档必须是基于GFS策略来创建，举个例子来说，如下图所示:
这个Backup Copy作业设置了14个还原点（Restore Points），每天运行一次作业，那么实际上在运行了一个周期后，它将得到如下结果：
如果开启了GFS每周的全备份后，Weekly Backup如果设置成2份，如下图设置。
那么这样的设置将得到如下结果，其中前两个全备份存档是根据GFS的策略要求，所创建出来的Weekly Full的存档。
V10的新变化 在V10版本中，Veeam的Backup Copy发生了一些变化，原来的Backup Copy模式继续保留，但是新增了一种全新的模式，因此这两种模式有了各自的名字：Immediate Copy和Periodic Copy。新增的模式叫做Immediate Copy，老的模式赋予了新的名字Periodic Copy。两种模式有一些区别，他们支持的内容会不一样，如下表所示。
   支持的备份存档 Immediate Copy Periodic Copy     vSphere和Hyper-V虚拟机备份 支持 支持   VBR集中管理的Veeam Agent 支持 支持   SQL和Oracle的日志备份 支持 不支持   非集中管理的Veeam Agent 不支持 支持   Oracle RMAN和SAP HANA 支持 不支持   Nutanix AHV 不支持 支持   AWS EC2 不支持 支持   Microsoft Azure 虚拟机 不支持 支持    除此之外，这两种Copy模式，在备份存档的生成上，有一些区别，对于Immediate Copy而言，他会根据主备份任务的设定，当主备份任务执行完成后，立刻生成一份备份拷贝存档。Immediate Copy是主备份任务的1：1的完全还原点镜像。但是需要特别注意的，它不是简单的备份文件的镜像，并不是vbk、vib的文件拷贝。举个例子来说，在主备份任务中如果设置了每个周六创建Synthetic Full的备份作业，会在周六生成全备份存档，而在这个备份存档生成后，Immediate Copy作业会运行并创建对应的Copy存档，这个创建出来的存档和主备份任务创建出来的vbk全备份不一样，它创建出来的是一份vib的增量备份。由于Immediate Copy的特点，它适用于所有需要进行应用程序日志复制的备份作业，因此在异地容灾时，对于关键的数据库系统，通过Immediate Copy能提升RPO级别。</description>
    </item>
    
    <item>
      <title>VBR中的那些隐藏键</title>
      <link>https://newblog.backupnext.cloud/post/2020-05-13-hidden-key-in-vbr/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://newblog.backupnext.cloud/post/2020-05-13-hidden-key-in-vbr/</guid>
      <description>VBR升级到v10之后增加了很多全新的功能，也多了很多隐藏的快捷键，今天我就来说说这些隐藏的秘密。
[Ctrl]+鼠标右键 在不少操作中，可以用到这个Ctrl+鼠标右键调出特别的菜单，一般来说，如果不按住Ctrl键，那么直接鼠标右键是看不见这些隐藏的菜单的。
NAS备份中执行一次全新的作业 正常的NAS文件备份在Veeam中都是永久增量备份，然而还是有些用户会需要用到执行一次全新的全备份，在NAS备份中Veeam一样提供了这个功能，只需要选中需要执行的备份作业，按住Ctrl键后，再点击鼠标右键，那么这个全备份的按钮就会出现。
执行完这个全备份后，会出现一个和普通虚拟机全备份/合成全备份稍微不一样的情况，那就是之前的备份数据将会被移动到Disk(Imported)之中，新的备份链将会替代之前的，变成活跃的NAS永久增量备份链。
Oracle/SAP HANA Backup 作业 Force delete 当配置并运行了Oracle或者SAP HANA的Backup作业后，VBR会出现类型为Oracle Rman backup或者SAP Backup的作业，右键点击这些作业会有Delete的选项，但是这个Delete必须要求首先将RMAN或者SAP HANA的备份存档删除掉。这时候如果不希望删除存档，但是只想删除备份作业，可以使用Ctrl+鼠标右键，会出现Force Delete选项。
SOBR的Run tiering job now 我觉得不少朋友肯定会为4小时往云上传一次数据的死板设定犯愁，其实有个右键菜单藏起来了，对着Scale-Out Backup Repository按住Ctrl再点鼠标右键，你就会发现这个立即运行Tiering作业的按钮。
方向左右键 在VBR的Jobs中，双击每个备份作业，可以查看最新的备份作业执行详情，然而如果要去看一些更早的历史作业，可能就会迷失在VBR的控制台中了。稍微复杂一点的操作是，打开History面板，然后找希望查看的日期逐个查看，也可以通过搜索进行一些关键字的过滤。
其实我们完全不需要打开History面板，VBR提供了在每个作业详情中查看历史作业的方法，只需要在详细任务信息界面按左右方向键，就能查看过往信息，虽然说不能像History中那样灵活选择，但是在快速排错时，是一个很不错的选择。
其他隐藏的鼠标右键 有些界面中，藏着一些鼠标右键可用的菜单，很不容易被发现，但是有时候却是很有用的，多数情况下，这些右键操作并不想干扰用户的正常操作，所以并没那么容易被发现。
SureBackup Statistics窗口中的右键 双击一条SureBackup Job，弹出Statistics窗口，能够看到上一次作业执行时上面的每一台VM的成功失败状态。除此之外，在这个静态的查看窗口，藏着一个Start按钮，选中Statistics窗口中的任意一台VM，除了能够在下面的详细日志中查看执行情况外，还能右键再次Start这个Datalab。
这个Start按钮主要是为我们在SureBackup失败时做一些Troubleshooting用途，点击Start之后，在Session log中会显示SureBackup 切换进入了Troubleshooting mode，在这个模式中，SureBackup Job不会因为失败或者成功被立刻终止，它会保持运行状态，一直到我们手工终止结束它。这里请确保Troubleshooting或者使用结束后，执行Stop按钮。
存放于含有Capacity Tier的备份存档 通常在打开Backups的属性对话框右键点击备份存档时，普通的备份存档只有copy path的按钮，这是为了让我们快速的从文件系统中找到该vbk、vib文件。
但是有些时候，如果是SOBR中含有Capacity Tier，条件满足的情况下，右键点这些备份存档，会出现新的右键菜单。
Ok，以上就是今天的一些隐藏按钮，如果觉得好用，赶紧点赞用起来哟。另外，如果您发现了更多的，也可以留言告诉我。</description>
    </item>
    
    <item>
      <title>Veeam Agent for Linux基础知识</title>
      <link>https://newblog.backupnext.cloud/post/2020-09-22-veeam-linux-agent-101/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://newblog.backupnext.cloud/post/2020-09-22-veeam-linux-agent-101/</guid>
      <description>自从年初Veeam Agent for Linux 4.0（简称VAL）随着VBR V10推出以来，这个功能越来越强大的备份代理使用也越来越广，不管是云上还是云下、虚拟还是物理，总有场景会用到VAL。然而我们发现对于刚刚接触VAL的朋友们其实还是会受到这个代理安装过程的困扰，就算是全自动的推送安装，依然会有朋友会碰到各种各样的安装问题。这让本来以使用体验极佳著称的Veeam备份软件变得很尴尬，“It just works!”的口号都不敢随便喊了。
其实，Veeam还是那么简单，VAL一样是这种简单极致的体验，就算是在大众门槛略高的Linux开源世界，只需要稍稍注意，就可以体验到VAL的极致简单使用体验。当然这需要一点点小技巧，对于熟练使用Linux的朋友，这些都不是问题，而对于不少只是因为要备份才接触Linux的备份管理员来说，会略有一些挑战。这主要原因是来自于VAL的软件安装依赖包，和Windows不一样的是，Veeam在所有Windows Server所需要安装的依赖包都集成在Veeam软件中，VBR会全自动的去推送所有缺失的依赖包。而对于Linux来说，在Veeam软件包中其实并不包含任何的依赖包，所有这些依赖包都来自于Linux系统本身的Software Package Manager，这里要划个重点！
什么是Package Manager？
打个比方，这个就是和手机的应用市场类似，每一个Linux系统都内置了这样的Package Manager，而不同发行版的Linux可能会使用不一样的Package Manager。Package Manager非常的智能，通常在主流的Linux发行版中安装软件最简单的方法就是通过Package Manager的一行命令就完成了，Package Manager会全自动的完成所有依赖组件的安装，最终交付相应软件给管理员使用。
在VAL支持的多种操作系统中，不同的系统使用不同的Package Manager，下面就是这些系统所对应使用的Package Manager清单。
   Linux发行版 默认常见的Package Manager     CentOS/Redhat/Oracle Linux/Fedora yum   Debian/Ubuntu Apt   SLES/openSUSE zypper    很显然，不管使用什么方式，我们要正常安装VAL，第一个前提条件就是Package Manager能够正常的工作，这个在有互联网连接的Linux系统中，完全没问题，绝大多数情况下系统安装完成后就自带了合适的软件安装源；然而在无法访问互联网的服务器数据中心，如果没有合理配置内部源，就会碰到各种报错了。处理方法也很简单，只需要去对应的Linux发行版的官网，下载当前版本的最新版ISO，并制作成本地源即可。比如，CentOS6.x就下载CentOS 6.10的iso，CentOS 7.x就下载CentOS 7.8.2003的iso镜像，然后挂载到CentOS中。本文以常见的CentOS 7.6为例说明下这个配置的全过程。
 首先找一个CentOS 7.8.2003的镜像下载点，比如阿里云的 https://mirrors.aliyun.com/centos/7.8.2003/isos/x86_64/ 在CentOS中，挂上这个刚刚下载到的镜像。  [centos@localhost ~]$ sudo mkdir /mnt/cdrom [centos@localhost ~]$ sudo mount /dev/cdrom /mnt/cdrom 备份并移动/etc/yum.</description>
    </item>
    
    <item>
      <title>Veeam备份服务器升级指南</title>
      <link>https://newblog.backupnext.cloud/post/2020-02-13-how-to-upgrade-vbr/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://newblog.backupnext.cloud/post/2020-02-13-how-to-upgrade-vbr/</guid>
      <description>前言 Veeam即将推出全新的v10版本，在这个版本中，Veeam支持从以前的VBR升级至v10版本，整个平滑升级过程不算复杂，和以往的VBR升级一样，当然也有一些细节需要注意。
升级前 请按照下面的流程图检查当前环境，在升级VBR之前确保其他组件已经正常升级。
由于v10开始，Veeam将使用全新的Veeam Universal License（VUL），所以请提前登陆My.veeam.com获取更新后的License，在升级过程中将会提示使用新的License激活产品。
升级方式 可以采用两种方式升级，没有太大区别。
 在原VBR服务器上原地升级； 全新安装一台VBR服务器，然后将Configuration Backup File还原至这台全新安装的VBR中。  由于第二种方式和全新安装几乎没有任何区别，因此本文不详细展开讨论，而只讨论第一种原地升级方式。
升级准备 准备好Veeam升级介质，Veeam的产品非常简单，升级介质和全新安装使用同一个介质包，只需要把产品包挂载到VBR服务器上即可。在执行Upgrade之前，需要做一系列准备工作：
 仔细阅读Release Notes，检查自己环境，看看是否有不支持的系统。   - VMware vSphere 5.1以及之前的版本 - Windows 2003和XP - Microsoft SQL Server 2005 使用Veeam Configuration Backup功能，将VBR的配置做一个备份，这个备份请确保是用Encrypted模式，这样所有在VBR中使用的用户名和密码将会妥善的被保存在.bco文件中。 检查VBR上面的所有备份作业，确保没有任何作业正在运行，这里要特别注意如下作业，需要手工点击Disable来停止：   - Backup Copy Job - SQL、Oracle的日志备份作业 ​	看看是否有Instant VM Recovery正在运行；
​	看看是否有Veeam Explorer正处于打开并在执行恢复；
​	看看是否有Surebackup/Virtual Lab正在运行。
最终，所有任务都停止后，会是如下图状态：
升级过程 整个升级过程非常简单，只需要按照向导点击几下鼠标，然后静静的等待30分钟以后，软件就能升级完成，因此在这里我就不详细去一步一步说明这个过程了。
可能碰到的问题  升级过程中，升级包会首先停止VBR的所有服务，有可能碰到停止服务超时或者失败，导致升级过程中断，建议碰到失败后首先检查下Services.msc中veeam开头的服务是否被正常停止。 服务都正常停止后，原地升级如果还报错，建议可以把VBR服务器重启一下后，再尝试升级，这里特别注意一下，在VBR重启后，需要重新检查所有VBR的作业，确保没有作业在自动运行。 如果尝试多次都无法进行正常升级，建议使用上面提到的方法二，全新安装一台VBR，然后将Configuration backup文件导入。 如果以上方法全部失败，请及时联系Veeam Support团队，我们的攻城狮将会及时为您提供升级支持。  以上就是升级的一些小提示，感谢阅读！</description>
    </item>
    
    <item>
      <title>Veeam备份服务器升级指南</title>
      <link>https://newblog.backupnext.cloud/post/2021-03-03-how-to-upgrade-vbr-v11-edition/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://newblog.backupnext.cloud/post/2021-03-03-how-to-upgrade-vbr-v11-edition/</guid>
      <description>前言 2月25日，Veeam推出全新的v11版本，在去年，我曾经写过一篇升级到v10的帖子，其实本次v11的升级和之前的v10升级没有太多的差别，今天的内容，我将之前的这个帖子提到的做一些针对v11的调整，算是一些些小更新吧。
升级前 请按照下面的流程图检查当前环境，在升级VBR之前确保其他组件已经正常升级。

v11完全兼容之前v10的VUL许可，因此已经在使用VUL许可的，可以完全不需要准备或者导入许可文件。
升级方式 可以采用两种方式升级，没有太大区别。
 在原VBR服务器上原地升级； 全新安装一台VBR服务器，然后将Configuration Backup File还原至这台全新安装的VBR中。  由于第二种方式和全新安装几乎没有任何区别，因此本文不详细展开讨论，而只讨论第一种原地升级方式。
升级准备 准备好Veeam升级介质，Veeam的产品非常简单，升级介质和全新安装使用同一个介质包，只需要把产品包挂载到VBR服务器上即可。在执行Upgrade之前，需要做一系列准备工作：
 仔细阅读Release Notes，检查自己环境，看看是否有不支持的系统。   - VMware vSphere 5.1以及之前的版本 - Windows 2003和XP - Microsoft SQL Server 2005 使用Veeam Configuration Backup功能，将VBR的配置做一个备份，这个备份请确保是用Encrypted模式，这样所有在VBR中使用的用户名和密码将会妥善的被保存在.bco文件中。 检查VBR上面的所有备份作业，确保没有任何作业正在运行，这里要特别注意如下作业，需要手工点击Disable来停止：   - Backup Copy Job - SQL、Oracle的日志备份作业 ​	看看是否有Instant VM Recovery正在运行；
​	看看是否有Veeam Explorer正处于打开并在执行恢复；
​	看看是否有Surebackup/Virtual Lab正在运行。
最终，所有任务都停止后，会是如下图状态：
升级过程 整个升级过程非常简单，只需要按照向导点击几下鼠标，然后静静的等待30分钟以后，软件就能升级完成，因此在这里我就不详细去一步一步说明这个过程了。
可能碰到的问题  升级过程中，升级包会首先停止VBR的所有服务，有可能碰到停止服务超时或者失败，导致升级过程中断，建议碰到失败后首先检查下Services.msc中veeam开头的服务是否被正常停止。 服务都正常停止后，原地升级如果还报错，建议可以把VBR服务器重启一下后，再尝试升级，这里特别注意一下，在VBR重启后，需要重新检查所有VBR的作业，确保没有作业在自动运行。 如果尝试多次都无法进行正常升级，建议使用上面提到的方法二，全新安装一台VBR，然后将Configuration backup文件导入。 如果以上方法全部失败，请及时联系Veeam Support团队，我们的攻城狮将会及时为您提供升级支持。  以上就是升级的一些小提示，感谢阅读！</description>
    </item>
    
    <item>
      <title>免费好工具，绝不套路</title>
      <link>https://newblog.backupnext.cloud/post/2021-03-09-gift-from-veeam-free-community-edition/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://newblog.backupnext.cloud/post/2021-03-09-gift-from-veeam-free-community-edition/</guid>
      <description>IT管理员的绝佳搭档，完全免费！
今天来给大家介绍Veeam Software的免费好工具，推荐给每一位IT管理员，Veeam作为备份解决方案领域的领军者，除了有强大的旗舰产品Veeam Availability Suite之外，还为每一位IT管理员配备了全套的免费工具。这些工具完全没有任何广告、没有任何限制、可以随意使用，但是这又和开源软件有所不同，Veeam称它们为社区版软件。
Veeam的这些社区版软件和Veeam商业版全功能软件略有不同，部分高级产品功能上做了限制，并且许可使用数量上做了一些限制，关于详细的限制请查看官网，链接如下：
https://www.veeam.com/cn/products-edition-comparison.html
然而，就算有这些限制，也无法阻挡无数管理员喜欢上这套强大的社区版软件。下面我就来和大家说说这套社区版软件Veeam Backup &amp;amp;Replication Community Edition在管理员日常运维中可以做的一些事情，使用这些功能，完全不需要消耗任何的Veeam许可，包括内置的10个免费礼品许可，但是却能为我们的运维管理带来极大的便利。
功能一：VeeamZIP，来自Veeam的免费压缩软件。 这是Veeam产品的经典功能之一，在Veeam第一代产品出来后就一直深藏在Veeam产品中，作为产品的一个标配功能。从这个名字上我们就能猜出一二，它其实简单来说就是能够把一个VMware或者Hyper-V的虚拟机打包成一个压缩文件，变成一个ZIP包，这和我们平时打包压缩某些文件的做法完全一样，而恢复的时候，一样可以从这个压缩存档中解压出我们需要的原始数据。  然后，实际上VeeamZIP并不止这么简单，强大的功能也并未止步于ZIP包。VeeamZIP使用了标准的Veeam备份引擎，只是它并不是普通的备份计划任务，它是一个完整的虚拟机全备份，你的每一次VeeamZIP操作都会触发备份引擎去对虚拟机执行一次全备份，并得到一份vbk全备份存档。
而在恢复时，这个VeeamZIP在Veeam中一样是一等公民，全套的恢复功能都可以使用，包括：
 即时恢复，包括v11的跨平台恢复至VMware或Hyper-V 即时磁盘恢复 整机还原 虚拟机磁盘还原 虚拟机文件还原 客户机细颗粒度文件对象还原 还原至Amazon EC2 还原至Microsoft Azure  更重要的是，VeeamZIP是真正免费的功能，不消耗社区版中任何的内置10个实例的许可，您的环境无论是有100台ESXi主机、1000台VM还是1PB的数据容量，您一样可以用社区版的VeeamZIP来为这些虚拟机创建压缩存档，没有任何限制。
功能二：存储快照的最佳搭档 存储快照集成是Veeam的高级功能，通常它会出现在Veeam的企业增强版中，而且因为配置略微复杂，不仅要了解虚拟化还要了解存储基础架构，因此很多刚入门的管理员通常不太会用到这个功能。
然而，假如您的存储是NetApp、Dell EMC SC或Unity、HPE 3PAR或Nimble、联想V系列或DM系列、以及华为的OceanStore系列存储，您完全可以免费无限制的使用社区版中的存储快照恢复功能。这一功能，将会极大的扩展这些存储在虚拟化环境中的能力，借助Veeam的存储快照解析和恢复能力，任何这些存储上执行的卷快照都可以用于Veeam的全功能恢复技术，包括：
 从卷快照中执行单台即时虚拟机恢复； 从卷快照中执行单个虚拟磁盘即时恢复； 从卷快照中恢复客户机操作系统的细颗粒度文件； 从卷快照中恢复应用程序对象，包括SQL、Oracle、Exchange、AD等。  
这一恢复能力，一样是因为没有备份任务，不需要Veeam执行备份作业，对于广大的快照用户来说是完全免费，无论您的环境有100台ESXi主机、10台企业级存储、1000个虚拟机，还是1PB数据使用这个功能恢复存储快照中的数据，完全免费。可以说是为这些存储额外提供了强大的增值功能。
所以，别在说存储快照不好用了，还没用存储快照的，可以赶快动手试试看吧！
功能三：免费磁带机/库管理工具 买个磁带机，通常来说必须配个昂贵的备份软件才能配套使用，很多备份软件对于磁带的使用还按驱动器进行收费，加一个驱动器动不动就是大几十万的授权许可费用。 
在Veeam社区版中，磁带机/库的管理和使用完全免费。管理员可以使用File to Tape功能，将数据写入磁带中。重点是，和上两个能力一样，无论您的环境有1台磁带机、10台磁带机、10000盘磁带、1千万个文件还是1PB的数据，使用Veeam的磁带机/库管理，授权完全免费，无限量使用。
所以，下次买了磁带机之后，别傻乎乎的再去为了一个文件写磁带功能买昂贵的配套软件啦，一个Veeam社区版软件就足够了。
功能四：Veeam初代旗舰FastSCP 这个功能可能对于绝大多数人都非常陌生，甚至是接触了多年Veeam的老鸟都可能完全不知道它的存在。然而如果您是Veeam的死忠粉，从2008年就开始关注Veeam，也许就不会陌生。是的它就是Veeam公司初创时候的第一款产品，Veeam FastSCP。
https://www.veeam.com/vmware-esxi-fastscp.html
这款产品曾经有单独的软件包，而现在，它藏身于VBR社区版的Files视图下。在Files视图中，上面的所有操作都是标准的Veeam FastSCP内容，在这里受管理的任意一台Server节点都可以利用FastSCP的能力轻松的完成数据的传递。Veeam能够在这些受Veeam管理的节点中的数据通过Veeam的数据传输服务轻松的传递到数据的目的地。

更强大的功能是，对于VMware的虚拟机文本配置文件，比如VMX、VMDK描述文件等，FastSCP还提供了在线编辑功能，管理员再也不需要打开ESXi Shell进入控制台去修改这些数据了。
这个功能，对于所管理的节点，也没有任何的数量限制，管理员可以自由的使用FastSCP来传输数据。
功能五：VMware vMotion的替代方案Quick Migration 作为VMware管理员，往往会有很尴尬的时候，VMware vMotion总有某一场景下，不合适使用的时候，这时候在没有合适的工具时，是迁好呢还是不迁好呢？
不用担心，免费的Veeam社区版来帮忙，vMotion搞不定的，Quick Migration来搞。付出一点点代价，获得最终迁移完成的结果，然而又是不需要任何产品许可，可以免费无限量使用的解决方案。</description>
    </item>
    
    <item>
      <title>用了这个方法，您的备份数据再也不怕被勒索了</title>
      <link>https://newblog.backupnext.cloud/post/2021-03-22-hardened-linux-repository/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://newblog.backupnext.cloud/post/2021-03-22-hardened-linux-repository/</guid>
      <description>勒索病毒自从2017年5月12日大规模爆发以来，在过去的4年里，也不断的自我进化，产生各种变种病毒，并且学会了各种弱点攻击，甚至是买通了门卫大叔&amp;hellip;

但是不管怎么样，门卫大叔是我们最值得信赖的，是我们的最后一道防线，我今天就想来和大家聊聊如何基于这最后一道防线，来构建我们安全的备份数据环境。
实现效果 先来说说实现效果：
 存放数据的设备我们选用大容量磁盘的机架式服务器，满配SATA硬盘，实现机架上容量密度最大化且每TB容量成本最低，这部分非常容易实现，咨询各大服务器厂商购买这样的服务器就行了。 这台机架服务器上线提供服务后，禁用所有账号的远程登录行为。唯一可访问的方式被限制在使用服务器上外接显示器、键盘和鼠标才能访问控制台。上架后对机柜进行上锁，控制机柜钥匙。 网络交换机和防火墙上，无需修改和设置这台服务器的任何访问，因为本身端口和服务的限制，这台服务器只被开放了Veeam服务用到的2500-3300的数据传输端口，这个数据传输链路仅限Veeam Datamover组件访问。 对于Veeam服务，只允许将数据写入到这个存储设备和从这个设备读取数据，而无法进行这些写入数据的修改和删除。  简单来说，就是这台设备只留了单通道使数据从Veeam进入这台服务器，进入后就被封起来了，只让外界通过Veeam的透明数据封存边界能读取数据并使用数据。
实现工具 非常简单，只需要Linux和Veeam v11，任何Veeam版本都具备这个功能，包括社区版。在v11新产品特性中，它叫Hardened Linux Repository。它有两部分功能组成：
  Single-use credentials for hardened repository
这个功能，用来完成对数据存储设备的初始配置，在初始配置时，会使用到一个单次使用的配置用途的账号，这个账号不会记忆留存于Veeam的任何服务上，并且在初始配置结束后，就可以禁用这个账号的远程访问以及sudo权限了。
  immutable flag
这个功能，用来建立透明的数据封存边界，允许Veeam写入并读取数据，但是不允许Veeam来删除和修改已写入的数据。当然为了平衡容量，immutable被设计成一个时间周期，指定周期内的短期数据才会进入封存边界内，而超过了这个周期的数据自动从边界内退出来，从而实现过期后可以被删除后释放空间。
  配置方法 以下配置方法包括Linux服务器上的配置和Veeam存储库的配置，其中Linux以Ubuntu 20.04LTS为例子来说明，其他发行版请各位大拿自行修改。
Ubuntu Repository预配置  创建用于一次性登录配置的用户。  admin@hardenedrepo:~$ sudo useradd -m veeamrepo admin@hardenedrepo:~$ sudo passwd veeamrepo 准备好相应备份空间格式化完成，并挂载到Ubuntu中的目录，比如/backupdata，请通过以下命令确认挂载结果。  admin@hardenedrepo:~$ df -h | grep /backupdata 赋予veeamrepo管理备份空间的权限。  admin@hardenedrepo:~$ sudo chown -R veeamrepo:veeamrepo /backupdata 修改sudoers配置文件，临时赋予veeamrepo用户sudo权限。  admin@hardenedrepo:~$ sudo vi /etc/sudoers  添加以下信息到sudoers文件后，保存。  veeamrepo	ALL=(ALL:ALL) ALL 这样，Ubuntu这边就算配置完成了，可以到Veeam中配置Hardened Repository了。</description>
    </item>
    
  </channel>
</rss>
